<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>MyZaGa</title>

    <!-- Bootstrap core CSS -->
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/stylesheets//scrolling-nav.css" rel="stylesheet">

  </head>

  <body id="page-top">

    {{>nav-bar}}

    <header class="bg-blue text-white">
      <div class="container text-center">
      <img class="rounded-circle float-center track-img" src="{{track.trackImage}}">
        <h1>{{track.name}}</h1>
        <p class=lead>by {{track.author}}</p>
      </div>
    </header>

    <section>
      <div class="container">
        <div class="row">
          <div class="col-lg-12 mx-auto bg-light">

            <div class="list-group track-list bg-light rounded">
                    <div class="list-group-item list-group-item-info">{{track.name}}</div>
                    <div class="list-group-item">by {{track.author}}</div>
                    <div class="list-group-item">year: {{track.year}}</div>
                    <div class="list-group-item">album: {{track.album}}</div>
                    <div class="list-group-item">
                    Uploaded by: 
                    <a class=action-button href="/playlists/{{track.uploadedListRef._id}}">
                        {{track.uploadedListRef.userRef.login}}
                    </a>
                    </div>
                    <audio controls>
                        <source src="{{track.location}}" type="audio/mpeg"> Your browser does not support the audio element.
                        
                    </audio>
            </div>
            {{#isOwner}}
            <hr>
            <a  style="display:inline-block;" class ="btn btn-primary" href="/tracks/{{track._id}}/update">Update</a>
            <div class =float-right style="display:inline-block;">
              <button class ="btn btn-primary" data-toggle="modal" data-target="#delete_modal">
                Delete
              </button>
            </div>
            {{/isOwner}}
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
     <div class="container">
        <div class="row">
          <div class="col-lg-12 mx-auto">
            <form action="/comments/{{track._id}}/new">
              <div class="form-group">
                <label for="comment-cont">Comment:</label>
                <textarea type="text" class="form-control" id="comment-cont" placeholder="Leave a comment..." name="commentText"></textarea>
              </div>
              <button type="submit" class="btn btn-primary float-right" formmethod="post">Submit</button>
            </form>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12 mx-auto">
          <h3>Comments:</h3>
            {{#track.comments}}
              <div style="margin-top: 20px; padding: 10px;" class="col-lg-12 mx-auto float-left  bg-gray rounded">
                <a href=/users/{{user._id}}>{{user.login}}</a>
                <span> added at: {{addedAt}}</span>
                <hr>
                <div class="rounded-1 com">
                  {{content}}
                </div>
                {{#owner}}
                <form action="/comments/{{_id}}">
                  <input type="hidden" value="{{track._id}}" name="trackId">
                  <button type="submit" class="btn btn-primary float-right" formmethod="post">Delete</button>
                </form>
                {{/owner}}
              </div> 
            {{/track.comments}}
          </div>
        </div>
      </div>
    </section>

    {{>footer}}

  </body>


<div class="modal fade" id="delete_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
      <h4 class="modal-title" id="myModalLabel">Wait</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        Are you sure?
      </div>
      <div class="modal-footer">
      <form action="/tracks/{{track._id}}">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="sumbit" formmethod="post" class="btn btn-primary">Delete</button>
      </form>
      </div>
    </div>
  </div>
</div>

</html>
